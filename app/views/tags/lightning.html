*{ Display all sessions "lightning" }*
<script src="@{'/public/javascripts/jquery.tablesorter.min.js'}"></script>
<script>
    $(function () {
        $("table#sortSession").tablesorter({ sortList:[
            [1, 0]
        ] });

    });

    var voteAction = #{jsAction @vote(':talk', ':member', ':value') /}

            function vote(id, name) {
                var myClass = $("#vote-"+id).attr("class");
                var value = (myClass == "inactive");
                $.get(voteAction({talk:id, member:name, value:value}), function (data) {
                    if (data == -1) {
                        alert("Erreur pendant le vote")
                    }
                    else {
                        $("#counter-" + id).html(data);
                        $("#vote-"+id).toggleClass("active");
                        $("#vote-"+id).toggleClass("inactive");
                    }
                })
            }
</script>
<div class="container">
    <table class="zebra-striped" id="sortSession">
        <thead>
        <tr>
            <th>Track</th>
            <th>Titre</th>
            <th>Speaker(s)</th>
            <th>Vote</th>
        </tr>
        </thead>
        <tbody>
        #{list items:_sessions, as:'talk'}
        <tr>
            <td>${talk.track}</td>
            <td><a href="@{LightningTalks.show(talk.id)}">${talk.title}</a></td>
            <td>
                #{list items:talk.speakers, as:'speaker'}
                    <a href="@{Profile.show(speaker.login)}">${speaker}</a>#{if !speaker_isLast}, #{/if}
                #{/list}
            </td>
            <td>
                <div id="counter-${talk.id}">${talk.getNumberOfVotes()}</div>
                #{if session.username}
                    <div id="vote-${talk.id}" class="#{if talk.hasVoteFrom(session.username)}active#{/if}#{else}inactive#{/else}" onclick="vote(${talk.id}, '${session.username}')">Vote</div>
                #{/if}

            </td>
        </tr>
        #{/list}
        </tbody>
    </table>
</div><!-- /container --> 